[tox]
isolated_build = true
envlist = py{36, 37, 38}
recreate = True

[testenv]
passenv = TOXENV CI TRAVIS TRAVIS_* CODECOV_*
deps = codecov>=1.4.0
whitelist_externals = poetry
commands =
    sudo apt install libgirepository1.0-dev
    poetry install -v --no-dev
    pip install pytest pytest-cov requests taskipy
    poetry run task test
    codecov -e TOXENV